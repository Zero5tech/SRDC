"use strict";(self.webpackChunkform_ui=self.webpackChunkform_ui||[]).push([[289],{1289:(K,f,t)=>{t.r(f),t.d(f,{AuthModule:()=>M});var m=t(3403),v=t(5619),b=t(8645),Z=t(6306),A=t(8504),y=t(9773),n=t(6223),F=t(6726),o=t(5879),I=t(1978),P=t(9483),d=t(617),c=t(5940),g=t(9157),x=t(6814),p=t(2296),u=t(2032);function T(e,a){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," required "),o.qZA())}function w(e,a){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," required "),o.qZA())}function C(e,a){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," incorrect "),o.qZA())}function U(e,a){1&e&&(o.TgZ(0,"mat-error"),o._uU(1," blocked "),o.qZA())}function E(e,a){1&e&&(o.TgZ(0,"span"),o._uU(1,"Login"),o.qZA())}function L(e,a){1&e&&(o.TgZ(0,"mat-icon"),o._UZ(1,"mat-spinner",15),o.qZA())}let J=(()=>{class e{constructor(i,r,s,l){this._formBuilder=i,this._authDataService=r,this._authService=s,this._router=l,this.submitInProgress=new v.X(!1),this.loginForm=this._formBuilder.group({Username:["",[n.kI.required]],Password:["",n.kI.required]}),this._unsubscribe=new b.x}ngOnInit(){}login(){this.loginForm.invalid||(this.submitInProgress.next(!0),this._authDataService.signIn(this.loginForm.controls.Username.value,this.loginForm.controls.Password.value).pipe((0,Z.K)(s=>{console.log("[LoginPage] => failed to login",s.error),this.submitInProgress.next(!1);let l=s?.error?.details,h="";if(l&&l.length>0&&(h=l[0]),h)switch(h){case"Disabled":this.clearPasswordInputAndSetError({disabled:!0});break;case"Blocked":this.clearPasswordInputAndSetError({blocked:!0});break;default:this.clearPasswordInputAndSetError({incorrect:!0})}else this.clearPasswordInputAndSetError({incorrect:!0});return(0,A._)(s)}),(0,y.R)(this._unsubscribe)).subscribe(s=>{console.log("tResp",s),(0,F.Z)(s.accessToken),this._authService.saveAuthTokens(s,!1),this._router.navigate(["home"]).then()}))}clearPasswordInputAndSetError(i){this.loginForm.controls.Password.setValue(null),this.loginForm.controls.Password.setErrors(i),this.loginForm.controls.Password.markAsDirty(),this.loginForm.controls.Password.markAsTouched(),this.submitInProgress.next(!1)}ngOnDestroy(){this._unsubscribe.next(),this._unsubscribe.complete()}}return e.\u0275fac=function(i){return new(i||e)(o.Y36(n.qu),o.Y36(I.Q),o.Y36(P.e),o.Y36(m.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:31,vars:14,consts:[[1,"header"],[1,"header-contain"],[1,"header-logo"],["src","assets/images/img.png"],[1,"header-text"],[1,"body",2,"background-image","url('assets/images/img-background.png')","height","85%"],[1,"container"],[1,"title"],[1,"sub-title"],[1,"login-form",3,"formGroup"],["appearance","outline",1,"username"],["type","email","formControlName","Username","matInput","","autocomplete","username","placeholder","username"],[4,"ngIf"],["type","password","formControlName","Password","matInput","","autocomplete","current-password","placeholder","password"],["mat-raised-button","","color","accent",1,"login-button","btn-with-loader",3,"disabled","click"],["color","primary","diameter","20"]],template:function(i,r){1&i&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"div",4),o._uU(5,"Children registration form"),o.qZA()()(),o.TgZ(6,"div",5)(7,"div",6)(8,"div",7),o._uU(9,"Welcome to Sunrise Dental Clinic"),o.qZA(),o.TgZ(10,"div",8),o._uU(11," First of all, Please register your E-mail an set a password: "),o.qZA(),o.TgZ(12,"form",9)(13,"mat-form-field",10)(14,"mat-label"),o._uU(15,"username"),o.qZA(),o._UZ(16,"input",11),o.YNc(17,T,2,0,"mat-error",12),o.qZA(),o.TgZ(18,"mat-form-field")(19,"mat-label"),o._uU(20,"password"),o.qZA(),o._UZ(21,"input",13),o.YNc(22,w,2,0,"mat-error",12),o.YNc(23,C,2,0,"mat-error",12),o.YNc(24,U,2,0,"mat-error",12),o.qZA(),o.TgZ(25,"button",14),o.NdJ("click",function(){return r.login()}),o.ALo(26,"async"),o.YNc(27,E,2,0,"span",12),o.ALo(28,"async"),o.YNc(29,L,2,0,"mat-icon",12),o.ALo(30,"async"),o.qZA()()()()),2&i&&(o.xp6(12),o.Q6J("formGroup",r.loginForm),o.xp6(5),o.Q6J("ngIf",r.loginForm.controls.Username.hasError("required")),o.xp6(5),o.Q6J("ngIf",r.loginForm.controls.Password.hasError("required")),o.xp6(1),o.Q6J("ngIf",r.loginForm.controls.Password.hasError("incorrect")),o.xp6(1),o.Q6J("ngIf",r.loginForm.controls.Password.hasError("blocked")),o.xp6(1),o.Q6J("disabled",!r.loginForm.valid||o.lcZ(26,8,r.submitInProgress)),o.xp6(2),o.Q6J("ngIf",!o.lcZ(28,10,r.submitInProgress)),o.xp6(2),o.Q6J("ngIf",o.lcZ(30,12,r.submitInProgress)))},dependencies:[d.Hw,c.Ou,g.KE,g.hX,g.TO,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,x.O5,p.lW,u.Nt,x.Ov],styles:["app-login .header{height:123px;border-radius:0 0 30px 30px;background:#F29121;box-shadow:0 5px 11px #00000040}app-login .header .header-contain{display:flex;flex-flow:row;gap:20px;margin:auto;width:50%;align-items:center}app-login .header .header-contain .header-logo{width:324px;height:123px;left:311px;background:#EEEEEE;transform:skew(-30deg)}app-login .header .header-contain .header-logo img{width:150px;height:50px;padding:35px}app-login .header .header-contain .header-text{width:473px;height:55px;top:34px;left:655px;color:#eee;font-size:30px;font-weight:400;line-height:55px;letter-spacing:0em;text-align:left}app-login .body img{width:100%;height:100%;display:flex;justify-items:flex-start;align-items:flex-end}app-login .body .container{display:flex;flex-flow:column;margin:auto;width:25%;padding-top:30px;font-size:24px;font-weight:400;line-height:33px;letter-spacing:0em}app-login .body .container .title{text-align:center}app-login .body .container .sub-title{color:#8f8f8f;font-size:18px;font-weight:400;line-height:33px;letter-spacing:0em;text-align:center;padding-top:30px}app-login .body .container .login-form{margin-top:20px;height:401px;top:374px;left:397px;border-radius:30px;background:#FFFFFF;box-shadow:0 4px 15px #00000040;display:flex;flex-flow:column;align-items:center}app-login .body .container .login-form .username{margin-top:100px}app-login .body .container .login-form mat-form-field,app-login .body .container .login-form .login-button{width:75%}\n"],encapsulation:2,changeDetection:0}),e})();var N=t(9753),S=t(3305),Y=t(6007),Q=t(7700),B=t(4104),D=t(2596),O=t(6381),j=t(2557),X=t(3680);const z=[{path:"",children:[{path:"sign-in",component:J,canActivate:[N.u]}]}];let M=(()=>{class e{constructor(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[m.Bz.forChild(z),d.Ps,c.Cq,g.lN,n.UX,p.ot,u.c,p.ot,S.To,d.Ps,Y.Cv,Q.Is,B.Nh,g.lN,n.u5,u.c,D.AV,O.Bb,n.UX,j.Hi,c.Cq,X.XK,m.Bz]}),e})()}}]);